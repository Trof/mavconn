

SET_SOURCE_FILES(WATCHDOG_SRC_FILES
  Main.cc
  Watchdog.cc
  Process.cc
  Command.cc
)

IF (UNIX)
  SET_SOURCE_FILES(TIMER_SRC_FILES ../timer/OgreTimer.Unix.cpp ../Clock.cc)
ELSEIF (WIN32)
  SET_SOURCE_FILES(TIMER_SRC_FILES ../timer/OgreTimer.WIN32.cpp)
ENDIF ()

PIXHAWK_EXECUTABLE(px_watchdog ${TIMER_SRC_FILES} ${WATCHDOG_SRC_FILES})
PIXHAWK_LINK_LIBRARIES(px_watchdog
  ${Boost_PROGRAM_OPTIONS_LIBRARY}
    ${Boost_SYSTEM_LIBRARY}
  ${Boost_FILESYSTEM_LIBRARY}
  mavconn_lcm
  lcm
)

PIXHAWK_EXECUTABLE_CONDITIONAL(px_watchdogcontrol CONDITION OPENCV_FOUND FILES WatchdogControl.cc ${TIMER_SRC_FILES})
PIXHAWK_LINK_LIBRARIES(px_watchdogcontrol
  ${Boost_PROGRAM_OPTIONS_LIBRARY}
  ${Boost_SYSTEM_LIBRARY}
  ${Boost_FILESYSTEM_LIBRARY}
  mavconn_lcm
  lcm
  ${OPENCV_HIGHGUI_LIBRARY_OPTIMIZED}
)

